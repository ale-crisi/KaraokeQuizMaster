<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="at.ac.hcw.kqm.ui.controller.ResultController" styleClass="screen" stylesheets="@styles.css">

   <center>
      <StackPane fx:id="mainContainer">
         <ImageView fitWidth="1200" fitHeight="800" preserveRatio="false">
            <image>
               <Image url="@assets/FinalDestination.jpeg" />
            </image>
         </ImageView>
         <!-- Normal Result Background (FinalDestination image) -->
         <VBox fx:id="normalResultContainer" style="-fx-background-color: transparent;">
            <VBox alignment="CENTER" style="-fx-background-color: transparent;" visible="false">
               <padding>
                  <Insets bottom="20.0" left="10.0" right="10.0" top="30.0" />
               </padding>
               <Label text="FINAL DESTINATION" textFill="#CCCCCC" style="-fx-font-family: 'Serif'; -fx-font-weight: bold; -fx-letter-spacing: 0.2em;">
                  <font>
                     <Font size="48.0" />
                  </font>
               </Label>
               <Label text="RESULTS" textFill="#999999" style="-fx-font-family: 'Serif'; -fx-font-weight: bold; -fx-letter-spacing: 0.3em;">
                  <font>
                     <Font size="24.0" />
                  </font>
               </Label>
            </VBox>

            <VBox fx:id="rankingContainer" spacing="15.0" style="-fx-background-color: transparent;" alignment="BOTTOM_LEFT" translateY="270" translateX="-49">
               <padding>
                  <Insets bottom="60.0" left="40.0" right="40.0" top="0.0" />
               </padding>
               <!-- Ranking entries will be added dynamically -->
            </VBox>

            <VBox spacing="20.0" style="-fx-background-color: transparent;" alignment="CENTER">
               <padding>
                  <Insets bottom="20.0" left="10.0" right="10.0" top="10.0" />
               </padding>
               <!-- Battle Container - shown only during tie-break -->
               <VBox fx:id="battleContainer" spacing="20.0" alignment="CENTER" style="-fx-background-color: transparent;" visible="true">
                  <Button fx:id="startBattleButton" mnemonicParsing="false" text="START TIE-BREAK!" styleClass="gold-button" style="-fx-border-color: #FFEE66; -fx-border-width: 3px; -fx-border-radius: 10px;"/>
               </VBox>
            </VBox>
         </VBox>


         <!-- Tie-Break Background (image) - hidden by default -->
         <StackPane fx:id="tieBreakBackground" visible="false" style="-fx-background-image: url('file:///C:/Users/acmat/IdeaProjects/KaraokeQuizMaster/src/main/resources/at/ac/hcw/kqm/ui/fxml/assets/TieBreak.jpeg'); -fx-background-size: cover; -fx-background-position: center; -fx-background-repeat: no-repeat;">
            <VBox fx:id="tieBreakRankingContainer" spacing="40.0" alignment="CENTER" translateY="638" minHeight="300">
               <Label text="TEST" style="-fx-text-fill: red; -fx-font-size: 24px;" />
               <!-- Tie-break ranking will be added here -->
            </VBox>
            <Button fx:id="startBattleButtonImage" mnemonicParsing="false" text="" style="-fx-background-color: transparent; -fx-border-color: #FFF9A6; -fx-border-width: 5px; -fx-border-radius: 100px; -fx-background-radius: 100px; -fx-min-width: 180px; -fx-min-height: 180px; -fx-pref-width: 180px; -fx-pref-height: 180px; -fx-cursor: hand;" translateX="281" translateY="-38" />
         </StackPane>

         <!-- Tie-Break Battle Button - Fixed position -->
         <Button fx:id="startKaraokeButton" mnemonicParsing="false" text="" translateX="-185" translateY="-122" visible="false" style="-fx-background-color: transparent; -fx-border-color: transparent; -fx-border-width: 3px; -fx-border-radius: 50%; -fx-background-radius: 50%; -fx-min-width: 189px; -fx-min-height: 189px; -fx-pref-width: 189px; -fx-pref-height: 189px; -fx-cursor: hand; -fx-effect: dropshadow(gaussian, rgba(255,255,150,0.85), 30, 0.9, 0, 0);"/>
      </StackPane>
   </center>
</BorderPane>
